services:
  spark-master:
    image: apache/spark:3.5.8-scala2.12-java11-python3-ubuntu
    command: ["/opt/spark/bin/spark-class", "org.apache.spark.deploy.master.Master", "--host", "0.0.0.0", "--port", "7077", "--webui-port", "8080"]
    ports:
      - "8080:8080"
      - "7077:7077"
    volumes:
      - ./:/opt/app
      - ./jars:/opt/extra-jars

  spark-worker:
    image: apache/spark:3.5.8-scala2.12-java11-python3-ubuntu
    command: ["/opt/spark/bin/spark-class", "org.apache.spark.deploy.worker.Worker", "spark://spark-master:7077", "--webui-port", "8081"]
    depends_on:
      - spark-master
    ports:
      - "8081:8081"
    volumes:
      - ./:/opt/app
      - ./jars:/opt/extra-jars
